syntax = "proto3";

package proto;
option go_package = "starbit/proto";

service Game {
  rpc JoinGame (JoinRequest) returns (JoinResponse) {}
  rpc SubscribeToTicks (SubscribeRequest) returns (stream TickUpdate) {}
}

message Empty {}

message JoinRequest {
  string username = 1;
}

message JoinResponse {
  int32 playerCount = 1;
  map<string, Player> players = 2;
  bool started = 3;
}

message SubscribeRequest {
  string username = 1;
}

message Player {
  string name = 1;
}

message System {
  int32 x = 1;
  int32 y = 2;
}

message GalaxyState {
  repeated System systems = 1;
}

message GameState {
  int32 playerCount = 1;
  map<string, Player> players = 2;
  bool started = 3;
}

message TickUpdate {
  int32 playerCount = 1;
  map<string, Player> players = 2;
  bool started = 3;
} 